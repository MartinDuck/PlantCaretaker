<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script> 
    <title>Podlewacz</title>
</head>
<body>
    <div class="container" id="moistureContainer">
    <h2>Wilgotno≈õƒá</h2>
    <div class="circle" id="moisture">--</div>
    
    <button id="pumpBtn" onclick="startPump()">PODLEJ RƒòCZNIE</button>

    <div class="auto-controls-row">
        <div class="switch-container">
            <label class="switch">
                <input type="checkbox" id="autoModeCheck" onchange="sendAutoMode()">
                <span class="slider round"></span>
            </label>
            <span class="auto-label">AUTO (<span id="currentThresholdDisplay">30</span>%)</span>
        </div>
        <button class="settings-mini-btn" onclick="toggleMoistureModal()">‚öôÔ∏è</button>
    </div>

    <div id="moistureModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="toggleMoistureModal()">&times;</span>
            <h3>Ustawienia Nawadniania</h3>
            <div class="input-group">
                <label>Docelowa wilgotno≈õƒá (%):</label>
                <input type="number" id="targetMoistureInput" min="5" max="95">
            </div>
            <button class="save-btn" onclick="saveMoistureSettings()">ZAPISZ</button>
        </div>
    </div>

    <div class="lastWatering">
        Ostatnie podlewanie: <span class="lastTime">--:--</span>
    </div>
</div>

    <div class="water-container" id="waterTank">
        <button class="settings-btn" onclick="toggleModal()">‚öôÔ∏è</button>
        <div id="waterFill" class="water-fill"></div>
        <div class="water-content">
            <h2>Poziom Wody</h2>
            <div class="water-value" id="waterVal">--%</div>
        </div>
    </div>

    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="toggleModal()">&times;</span>
            <h3>Kalibracja Zbiornika</h3>
            <p>Dystans w cm:</p>
            <div class="input-group">
                <label>Pusty:</label>
                <input type="number" id="distEmpty" min="0" max="1000">
                <button class="calib-btn" onclick="calibrate('empty')">üéØ</button>
            </div>
            <div class="input-group">
                <label>Pe≈Çny:</label>
                <input type="number" id="distFull" min="0" max="1000">
                <button class="calib-btn" onclick="calibrate('full')">üéØ</button>
            </div>
            <div class="input-group">
                <label>Minimum wody (%):</label>
                <input type="number" id="minWaterLevel" min="0" max="50">
            </div>
            <button class="save-btn" onclick="saveSettings()">ZAPISZ</button>
        </div>
    </div>
</body>
</html>